---
layout: post
title: 'ZFS: Rampant Layering Violation'
date: 2007-05-06 03:02:44.000000000 -07:00
tags:
- Software
- Operating Systems
- OpenSolaris
- Solaris
- ZFS
- filesystem
- Linux
- freebsd
- Mac OS X
type: post
published: true
---
<p>I stumbled upon a <a href="http://blogs.sun.com/bonwick/entry/rampant_layering_violation">great article</a> (<a href="http://arstechnica.com/staff/fatbits.ars/2007/05/04/rampant-layering-syndrome">via Ars Technica</a>) by <a href="http://blogs.sun.com/bonwick/">Jeff Bonwick</a>, responding to <a href="http://en.wikipedia.org/wiki/Andrew_Morton_%28computer_programmer%29">Andrew Morton's</a> claim that ZFS is a "<a href="http://lkml.org/lkml/2006/6/9/409">rampant layering violation</a>" because it cuts across the traditionally separate worlds of the filesystem, volume manager, and RAID controller.</p>
<p>I think ZFS is a brilliant invention and believe it'll go far.  It removes complexity and cost, improves data reliability and generally makes people's (both sysadmins & desktop users) lives soooo much easier. Too many times I've had to be the bearer of bad news and let a customer know their data is corrupt and they'll have to restore from backup. Most of the time we can work out where the problem has occurred and take the necessary steps to prevent or reduce the chances of it from occurring again. However there are times, particularly when dealing with 3rd party storage and it's associated software, that an explanation can't be found and I have to refer the customer to the 3rd party vendor. These problems are invariably due to over complexity in the storage stack. </p>
<p>Whilst ZFS does have it's limitations (can't shrink or boot from ZFS just yet), work is in place to remove these limitations.  Remember, ZFS is in it's infancy - all it's competitors have been in the public sector for many many years.</p>
<p>One of the <a href="http://blogs.sun.com/bonwick/entry/rampant_layering_violation#comment-1178404828000">comments</a> on Jeff's post caught my eye (I've copied part of it verbatim)...</p>
<p><!--more--></p>
<blockquote><p>
first, it is my understanding that sun chose a particular open-license to prevent zfs to make it into the linux kernel. this is unfortunate. with zfs coming to mac osx soon, zfs is the chance for sun to basically implement and benevolently control the future direction of one file system to conquer them all. (hey, sun: how about releasing a slower version for linux that's got the extra useless layer as dummy calls, and that allows me to mount a zfs partition/disk on a sun or on a max osx or on a linux machine?) second, is it not possible for zfs to plug into the upper linux layer for its interface, use the intermediate parts that it has itself rather than calling on linux, and rely only on the lowest linux hardware layer?</p></blockquote>
<p>This is typical of a lot of people in the Linux community and is quite childish - "he's got a nice shiny new toy and he won't let me play with it". Sun is not preventing Linux from doing anything, it's own license is. <a href="http://blogs.sun.com/darren/entry/zfs_under_gplv2_already_exists">In fact there is enough Linux compatible code</a> out there for some enterprising Linux developer to work on their own ZFS port.  Remember, the only reason ZFS has made it into FreeBSD and OS X is because their licenses aren't so aggressive towards other licenses.</p>
<p>I'm a big fan of Linux, but not of this kind of mentality.  The operating system space is big enough for all of us - it's not a Linux vs MS world. Get over it.</p>
