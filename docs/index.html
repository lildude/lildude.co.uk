---
layout: page
title: Documentation
date: 2007-10-06 10:40:53.000000000 -07:00
tags: []
type: page
published: false
---
<div class="pagetitle">
<h1>phpSmug Documentation</h1>
</div>
<p><a id="installation"></a></p>
<h2>Installation</h2>
<p>Copy the files from the installation package into a folder on your server.  They need to be readable by your web server.  You can put them into an include folder defined in your php.ini file, if you like, though it's not required. </p>
<p><a id="usage"></a></p>
<h2>Usage</h2>
<p>To use phpSmug, all you have to do is include the file in your PHP scripts and create an instance.  For example:</p>
<pre lang="php">
    	require_once("phpSmug/phpSmug.php");
        $f = new phpSmug();
</pre>
<p>The constructor takes three arguments:</p>
<ul>
<li><code>$APIKey</code> - Required
<p>This is the API key you have obtained for your application from	<a href="http://www.smugmug.com/hack/apikeys">http://www.smugmug.com/hack/apikeys</a></li>
<li><code>$AppName</code> - Optional<br />
Default: NULL</p>
<p>This is the name, version and URL of the application you have built using the phpSmug. There is no required format, but something like: <code>"My Cool App/1.0 (http://my.url.com)"</code> would be very useful.</p>
<p>Whilst this isn't obligatory, it is recommended as it helps SmugMug identify the application that is calling the API in the event one of your users reports a problem on the SmugMug forums.</li>
<li><code>$die_on_error</code> - Optional<br />
Default: FALSE</p>
<p>This takes a boolean value and determines whether the class will die (aka cease operation) if the API returns an error statement.  Every method will return false if the API returns an error.  You can access error messages using the getErrorCode() and getErrorMsg() methods.</p>
<p>Alternatively, set this to TRUE to display the errors returned by the API. This is only recommended during the development stages of your application.</li>
</ul>
<p>To call a method, remove the "<code>smugmug.</code>" part of the name and replace any fullstops with underscores. For example, instead of <code>smugmug.images.get</code>, you would call <code>$f->images_get()</code>.</p>
<p>Remember: The function names <strong>ARE</strong> case sensitive.</p>
<p>All functions have their arguments implemented in the list order on their documentation page (a link to which is included with each method in the phpSmug class). The only variation is the SessionID does not need to be passed to the methods as it's automatically set when you establish a session.</p>
<p>The only exceptions to this are <code>albums_create()</code>, <code>albums_changeSettings()</code> and <code>images_upload()</code>.</p>
<p><code>albums_create()</code> and <code>albums_changeSettings()</code> have far too many possible optional parameters. To pass the optional parameters, use an associative array for all the options you wish to set. For example:</p>
<pre lang="php">
	   $optArgs = array("AlbumTemplateID"=>"5", 
			"SubCategoryID"=>"20", 
			"Keywords"=>"cat;pets;dog");
	   $NewAlbumID = $f->albums_create($Title, $CategoryID, $optArgs); 
</pre>
<p>See the API page for the full list of optional parameters.</p>
<p><code>images_upload()</code> does not use the API for uploading, but instead HTTP PUT as recommended by SmugMug at <a href="http://smugmug.jot.com/WikiHome/API/Uploading">http://smugmug.jot.com/WikiHome/API/Uploading</a>.</p>
<p>HTTP PUT has been chosen as it's quicker, easier to use and more reliable than the other methods.</p>
<p><a id="authentication"></a>    </p>
<h2>Authentication</h2>
<p>You must use a login method to query SmugMug.  This sets up your session ID required for interaction with the API.</p>
<p><code>login_anonymously()</code> takes no arguments and will allow you to access any public gallery or image.</p>
<p>If you wish to access private albums and images, upload or change settings, you will need to login using either <code>login_withPassword()</code> or <code>login_withHash()</code>.</p>
<p>Both methods will use HTTPS/SSL (as of rev 1.0.5/1.1.3) to ensure your username and password information is encrypted.</p>
<p><code>login_withHash()</code> is probably the most secure method as your email and password can not be determined from the hash.  However, in order to obtain the hash and userid, you need to login at least once using <code>login_withPassword()</code>.</p>
<p><a id="caching"></a></p>
<h2>Caching</h2>
<p>Caching can be very important to a project as it can drastically improve the performance of your application. </p>
<p>phpSmug has caching functionality that can cache data to a database or files, you just need to enable it.</p>
<p>It is recommended that caching is enabled immediately after a new phpSmug instance is created, and before any other phpSmug methods are called.</p>
<p>To enable caching, use the <code>enableCache()</code> function.</p>
<p>The <code>enableCache()</code> function takes 4 arguments:</p>
<ul>
<li><code>$type</code> - Required<br />
This is "<code>db</code>" for database or "<code>fs</code>" for filesystem.</li>
<li><code>$connection</code> - Required<br />
The value for this depends on which caching store you will be using as defined by <code>$type</code>.</p>
<p>If you're using a database (db), then this a PEAR::DB connection string, for example: <code>mysql://user:password@server/database</code></p>
<p>If you're using the local filesystem, this is the folder/directory that the web server has write access to. This directory must already exist.</p>
<p>Use absolute paths for best results as relative paths may have unexpected behaviour. They'll usually work, you'll just want to test them before going live.</p>
<p>You may not want to allow the world to view the files that are created during caching.  If you want to hide this information, either make sure that your permissions are set correctly, or prevent the webserver from displaying <code>*.cache</code> files.  		</p>
<p>In Apache, you can specify this in the configuration files or in a <code>.htaccess</code> file with the following directives:</p>
<pre lang="text">
		&lt;FilesMatch "\.cache$"&gt;
		   Deny from all
		&lt;/FilesMatch&gt;
</pre>
<p>Alternatively, you can specify a directory that is outside of the web server's document root.</li>
<li><code>$cache_expire</code> - Optional<br />
Default: 3600</p>
<p>This is the maximum age of each cache entry in seconds.</li>
<li><code>$table</code> - Optional<br />
Default: smugmug_cache</p>
<p>This is the database table name that will be used for storing the cached data.  This is only applicable for database (db) caching.</p>
<p>If the table does not exist, phpSmug will attempt to create it.</li>
<p>If you have caching enabled, and you make changes, it's a good idea to call <code>clearCache()</code> to refresh the cache so your changes are reflected immediately.
</ul>
<p><a id="uploading"></a>    </p>
<h2>Uploading</h2>
<p>Uploading is very easy.  You can either upload an image from your local	system, or from a location on the web using the <code>images_upload()</code> function.</p>
<p>You can use this function for both local and remote files as <code>images_uploadFromURL()</code> just calls <code>images_upload()</code>, but is included for completeness.</p>
<p>In order to upload, you will need to have logged into SmugMug and have the album ID of the album you wish to upload to.</p>
<p>Then it's just a matter of calling the method with the various optional	parameters.</p>
<p>For example, upload a local file using:</p>
<pre lang="php">	
	$f->images_upload(123456, "/path/to/image.jpg");
</pre>
<p>or from a remote site using:</p>
<pre lang="php">
	$f->images_upload(123456, "http://my.site.com/image.jpg");
</pre>
<p>OR</p>
<pre lang="php">	
	$f->images_uploadFromURL(123456, "http://my.site.com/image.jpg");
</pre>
<p>You can find a list of optional parameters, like caption and keywords on the API documentation page.</p>
<p><a id="replace"></a></p>
<h2>Replacing Photos</h2>
<p>Replacing photos is identical to uploading.  The only difference is you need to specify the Image ID of the image you wish to replace. </p>
<p><a id="other"></a></p>
<h2>Other Notes</h2>
<p>Many of the methods have optional arguments.  For these, I have implemented them in the same order that the SmugMug API documentation lists them. PHP allows for optional arguments in function calls, but if you want to use the third optional argument, you have to fill in the others to the left first. You can use the <code>NULL</code> value in the place of an actual argument.  For example:</p>
<pre lang="php">
	$f->images_changeSettings($ImageID, NULL, $Caption);
</pre>
<p>This will change just the image's caption.  <code>NULL</code> here is in place of specifying the album ID. As no album ID is specified, the image will remain in the same album.</p>
<p>Some people will need to use phpSmug from behind a proxy server.  You can use the setProxy() method to set the appropriate proxy settings. For example:</p>
<pre lang="php">
	$f = new phpSmug("<api key>");
	$f->setProxy("proxy_server", "8080");
</api></pre>
<p>All your calls will then pass through the specified proxy on the specified port.</p>
<p>And that's all folks.</p>
<p>Keep up to date on developments and enhancements to phpSmug on the project page at <a href="http://lildude.co.uk/projects/phpsmug/">http://lildude.co.uk/projects/phpsmug/</a> .</p>
<p>If you encounter any problems with phpSmug, please feel free to log a ticket at <a href="http://dev.lildude.co.uk/phpSmug/newticket">http://dev.lildude.co.uk/phpSmug/newticket</a> .</p>
<p>Oh, and by all means, please feel free to show your appreciation for phpSmug by making a small donation via the link at http://lildude.co.uk/projects/phpsmug/ .</p>
<p>This documentation is provided in the README.txt.</p>
<p><a id="change"></a></p>
<h2>Change History</h2>
<h3>1.0.x Branch</h3>
<ul>
<li>1.0.10 - 4 Mar '08
<ul>
<li>Re-introduced anonymous method call caching. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/18">Ticket #18</a>)</li>
<li>enableCache() now checks cache directory is writeable (<a href="http://dev.lildude.co.uk/phpSmug/ticket/19">Ticket #19</a>)</li>
<li>die_on_error is now acknowledged consistently. If die_on_error is NOT set, it's up to the application developer to check getErrorCode and getErrorMessage after each method call. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/20">Ticket #20</a>)</li>
<li>Added a clearCache() function to easily empty the cache. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/22">Ticket #22</a>)</li>
<li>Stopped caching the results of failed method calls when die_on_error is set. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/23">Ticket #23</a>)</li>
</ul>
</li>
<li>1.0.9 - 26 Feb '08
<ul>
<li>Removed extra "}" (<a href="http://dev.lildude.co.uk/phpSmug/ticket/17">Ticket #17</a>) - Thanks Erik Anderson for pointing this one out.</li>
</ul>
</li>
<li>1.0.8 - 23 Feb '08
<ul>
<li>Removed PHP 4 support.</li>
<li>Fixed typo in cache() apostrophe escaping when using "db" as the as the cache store (<a href="http://dev.lildude.co.uk/phpSmug/ticket/15">Ticket #15</a>).</li>
<li>Stopped caching anonymous method calls (<a href="http://dev.lildude.co.uk/phpSmug/ticket/16">Ticket #16</a>).</li>
<li>Start taking into account the 6 hour SessionID inactivity timeout.</li>
</ul>
</li>
<li>1.0.7 - 10 Feb '08
<ul>
<li>Forgot to take into account the ImageKey returned by image_upload() and image_uploadFromURL(), and AlbumKey returned by album_create().<br />
These functions now return an array holding the ID and key. Thanks to devbobo for <a href="http://www.dgrin.com/showpost.php?p=748067&postcount=13">pointing this out</a> so quickly.</li>
</ul>
</li>
<li>1.0.6 - 9 Feb '08
<ul>
<li>Implemented support for the new security changes detailed at <a href="http://www.dgrin.com/showthread.php?t=83919">http://www.dgrin.com/showthread.php?t=83919</a></li>
<li>Documented phpSmug using phpDoc notation.</li>
</ul>
</li>
<li>1.0.5 - 27 Jan '08
<ul>
<li>All login.with* methods now use HTTPS to ensure login information is encrypted (<a href="http://dev.lildude.co.uk/phpSmug/ticket/14">Ticket #14</a>)</li>
</ul>
</li>
<li>1.0.4 - 4 Jan '08
<ul>
<li>Changing caching to ensure more consistent caching (<a href="http://dev.lildude.co.uk/phpSmug/ticket/11">Ticket #11</a>)</li>
<li>Changed "response" database table field type to LONGTEXT to cater for larger amounts of data. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/12">Ticket #12</a>)</li>
<li>Fixed issue where apostrophes in cached data are not escaped correctly (<a href="http://dev.lildude.co.uk/phpSmug/ticket/13">Ticket #13</a>)</li>
</ul>
</li>
<li>1.0.3 - 17 Dec '07
<ul>
<li>Corrected phpSmug.php option order to align with that documented in the API docs, thus resolving an issue with the example.php. (Ticket #9) (<a href="http://dev.lildude.co.uk/phpSmug/ticket/9">Ticket #9</a>)</li>
<li>Corrected users_getTree() argument order too.</li>
</ul>
</li>
<li>1.0.2 - 12 Oct '07
<ul>
<li>Made images_uploadFromURL() use the API method and not mine</li>
</ul>
</li>
<li>1.0.1 - 6 Oct '07
<ul>
<li>Initial release</li>
</ul>
</li>
</ul>
<h3>1.1.x Branch</h3>
<ul>
<li>1.1.7 - 4 Mar '08
<ul>
<li>Re-introduced anonymous method call caching. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/18">Ticket #18</a>)</li>
<li>enableCache() now checks cache directory is writeable (<a href="http://dev.lildude.co.uk/phpSmug/ticket/19">Ticket #19</a>)</li>
<li>die_on_error is now acknowledged consistently. If die_on_error is NOT set, it's up to the application developer to check getErrorCode and getErrorMessage after each method call. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/20">Ticket #20</a>)</li>
<li>Added a clearCache() function to easily empty the cache. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/22">Ticket #22</a>)</li>
<li>Stopped caching the results of failed method calls when die_on_error is set. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/23">Ticket #23</a>)</li>
</ul>
</li>
<li>1.1.6 - 23 Feb '08
<ul>
<li>Removed PHP 4 support.</li>
<li>Fixed typo in cache() apostrophe escaping when using "db" as the as the cache store (<a href="http://dev.lildude.co.uk/phpSmug/ticket/15">Ticket #15</a>).</li>
<li>Stopped caching anonymous method calls (<a href="http://dev.lildude.co.uk/phpSmug/ticket/16">Ticket #16</a>).</li>
<li>Start taking into account the 6 hour SessionID inactivity timeout.</li>
</ul>
</li>
<li>1.1.5 - 10 Feb '08
<ul>
<li>Forgot to take into account the ImageKey returned by image_upload() and image_uploadFromURL(), and AlbumKey returned by album_create().<br />
These functions now return an array holding the ID and key. Thanks to devbobo for <a href="http://www.dgrin.com/showpost.php?p=748067&postcount=13">pointing this out</a> so quickly.</li>
</ul>
</li>
<li>1.1.4 - 9 Feb '08
<ul>
<li>Implemented support for the new security changes detailed at <a href="http://www.dgrin.com/showthread.php?t=83919">http://www.dgrin.com/showthread.php?t=83919</a></li>
<li>Documented phpSmug using phpDoc notation.</li>
</ul>
</li>
<li>1.1.3 - 27 Jan '08
<ul>
<li>All login.with* methods now use HTTPS to ensure login information is encrypted (<a href="http://dev.lildude.co.uk/phpSmug/ticket/14">Ticket #14</a>)</li>
</ul>
</li>
<li>1.1.2 - 4 Jan '08
<ul>
<li>Changing caching to ensure more consistent caching (<a href="http://dev.lildude.co.uk/phpSmug/ticket/11">Ticket #11</a>)</li>
<li>Changed "response" database table field type to LONGTEXT to cater for larger amounts of data. (<a href="http://dev.lildude.co.uk/phpSmug/ticket/12">Ticket #12</a>)</li>
<li>Fixed issue where apostrophes in cached data are not escaped correctly (<a href="http://dev.lildude.co.uk/phpSmug/ticket/13">Ticket #13</a>)</li>
</ul>
</li>
<li>1.1.1 - 15 Oct '07
<ul>
<li>Initial release</li>
</ul>
</li>
</ul>
